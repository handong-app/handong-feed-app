<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0/EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thc.realspr.mapper.TbadminMapper">
    <select id="allUsers" parameterType="map" resultType="com.thc.realspr.dto.TbadminDto$UserDetail">
        SELECT u.name, u.created_at AS createdAt, u.last_login_time as lastLoginTime, MAX(i.createdDate) AS lastReadTime
        FROM `mydb_Tbuser` u
                 LEFT JOIN `mydb_TbUserInteraction` i ON u.id = i.userId
        GROUP BY u.id, u.name, u.created_at, u.last_login_time;
    </select>
</mapper>